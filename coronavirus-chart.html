<!DOCTYPE html>
<!-- saved from url=(0060)https://www.chartjs.org/samples/latest/scales/time/line.html -->
<html xml:lang="en" lang="en" xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Coronavirus 3 Day Prediction Live - 2020-01-29 infected and dead</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="&#x1F4C8;Chart of 2019-nCoV infected, dead, and 3 day forecast. Updated 2020-01-29. Interactive historical graph with optional logarithmic scale.">
	<meta name="keywords" content="coronavirus,chart,history,graph,logaritmic scale,log scale,logaritmic">
	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

	<!--	<script async="" src="./index_files/analytics.js"></script>-->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>

<!--	<script src="./index_files/Chart.min.js"></script>-->
	<script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>


<!--	<script src="./index_files/utils.js"></script>-->
	<script src="https://www.chartjs.org/samples/latest/utils.js"></script>
	<style>

		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}

		h1 {
			font-size: calc(15px + 5vmin);
			color: #000000;
			/*text-shadow: 2px 2px 2px #688200;*/
		}

		button {
			font-size: calc(7px + 1vmin);
            background-color: white;
			color: #000000;
			border-radius: 0;
			border-width: 1px;
			box-shadow:inset 0px 1px 0px 0px #fff6af;
			border:1px solid #000000;

		}

	</style>
<style type="text/css">/* Chart.js */
@keyframes chartjs-render-animation {
	from {
		opacity: .99
	}
	to {
		opacity: 1
	}
}

.chartjs-render-monitor {
	animation: chartjs-render-animation 1ms
}

.chartjs-size-monitor, .chartjs-size-monitor-expand, .chartjs-size-monitor-shrink {
	position: absolute;
	direction: ltr;
	/*left: 0;*/
	/*top: 0;*/
	/*right: 0;*/
	/*bottom: 0;*/
	overflow: hidden;
	pointer-events: none;
	visibility: hidden;
	z-index: -1
}

.chartjs-size-monitor-expand > div {
	/*position: absolute;*/
	/*width: 1000000px;*/
	/*height: 1000000px;*/
	left: 0;
	top: 0
}

.chartjs-size-monitor-shrink > div {
	/*position: absolute;*/
	/*width: 200%;*/
	/*height: 200%;*/
	/*left: 0;*/
	/*top: 0*/
}</style>
</head>

<body>

	<div style="align-content: center; text-align: center; display: flex; justify-content: center;">
		<div style="max-width: 1400px; width: 98.5%">
			<h1>&#x1F4C8; Coronavirus 3 Day Prediction Live</h1>
			<i>
				Updated 2020-01-29 05:32 UTC<br><br>
				An interactive chart of 3 day forecast of Coronavirus infected and dead. Click the labels to toggle infected count, 3 day prediction or death toll. Hover to see data point details. Toggle log scale below.
			</i><br><br>
<!--				<div class="chartjs-size-monitor">-->
<!--					<div class="chartjs-size-monitor-expand">-->
<!--						<div class=""></div>-->
<!--					</div>-->
<!--					<div class="chartjs-size-monitor-shrink">-->
<!--						<div class=""></div>-->
<!--					</div>-->
<!--				</div>-->
				<!--				<canvas id="canvas" style="display: block; width: 674px; height: 337px;" width="674" height="337" class="chartjs-render-monitor"></canvas>-->
				<canvas id="canvas" style="display: block" class="chartjs-render-monitor"></canvas>
			<br>
			<button id="toggleScale" style="border-radius: 0">Toggle Logaritmic / Linear Scale</button><br>
			<br>
			The log scale chart of the time series shows that that doubling time is around 1.7 days.<br>
			The time series graph above tracks 2019â€“20 Wuhan coronavirus 2019-nCoV outbreak originating in Wuhan, Hubei province, China. Basic reproduction number is around 2.62 new infected per one sick. The most frequently reported symptoms are fever, cough, muscle aches and tiredness. Time from exposure to developing symptoms (incubation) of the virus is 2 - 10 days.<br>
			<br>
			<br>
			<br>
			<a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=https%3A%2F%2FCoronavirusChart.com%20interactive%20up%20to%20date%20chart%20with%20log%20scale%20toggle%20%23coronavirus">Tweet</a>
			<br>
			<br>
			<br>
			<a class="twitter-timeline" href="https://twitter.com/WHO?ref_src=twsrc%5Etfw">Tweets by WHO</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



			<script>
				let data = [
					{ d: '2020-01-17', i: 45, t: 1},
					{ d: '2020-01-18', i: 62, t: 2},
					{ d: '2020-01-19', i: 121, t: 3},
					{ d: '2020-01-20', i: 198, t: 4},
					{ d: '2020-01-21', i: 291, t: 4},
					{ d: '2020-01-22', i: 440, t: 6},
					{ d: '2020-01-23', i: 571, t: 22},
					{ d: '2020-01-24', i: 830, t: 25},
					{ d: '2020-01-25', i: 1287, t: 41},
					{ d: '2020-01-26', i: 1975, t: 55},
					{ d: '2020-01-27', i: 2744, t: 80},
					{ d: '2020-01-28', i: 4515, t: 106},
					{ d: '2020-01-29', i: 6171, t: 133},
				];

				data = predict(data);

				var type = 'linear';

				var timeFormat = 'YYYY-MM-DD';

				function newDate(days) {
					return moment().add(days, 'd').toDate();
				}

				function newDateString(days) {
					return moment().add(days, 'd').format(timeFormat);
				}

				var color = Chart.helpers.color;
				var config = {
					type: 'line',
					data: {
						labels: data.map(d => new Date(d.d)),
						datasets: [
							{
								label: 'Infected - Click to toggle',
								backgroundColor: color(window.chartColors.yellow).alpha(0.5).rgbString(),
								borderColor: window.chartColors.yellow,
								fill: false,
								data: data.map(d => d.i),
							},
							{
								label: 'Dead',
								backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
								borderColor: window.chartColors.red,
								fill: false,
								data: data.map(d => d.t),
							},
						]
					},
					options: {
						title: {
							text: 'Coronavirus Infected and Dead Chart'
						},
						scales: {
							xAxes: [{
								type: 'time',
								time: {
									parser: timeFormat,
									round: 'day',
									tooltipFormat: 'll',
									unit: 'day'
								},
								scaleLabel: {
									display: true,
									labelString: 'Date'
								}
							}],
							yAxes: [{
								scaleLabel: {
									display: true,
									labelString: '# people'
								}
							}]
						},
					}
				};

				window.onload = function() {
					var ctx = document.getElementById('canvas').getContext('2d');
					window.myLine = new Chart(ctx, config);

				};

				document.getElementById('toggleScale').addEventListener('click', function() {
					type = type === 'linear' ? 'logarithmic' : 'linear';
					window.myLine.options.title.text = 'Chart.js Line Chart - ' + type;
					window.myLine.options.scales.yAxes[0] = {
						display: true,
						type: type
					};

					window.myLine.update();
				});

				function findLineByLeastSquares(values_x, values_y) {
					var x_sum = 0;
					var y_sum = 0;
					var xy_sum = 0;
					var xx_sum = 0;
					var count = 0;

					/*
					 * The above is just for quick access, makes the program faster
					 */
					var x = 0;
					var y = 0;
					var values_length = values_x.length;

					if (values_length !== values_y.length) {
						throw new Error('The parameters values_x and values_y need to have same size!');
					}

					/*
					 * Above and below cover edge cases
					 */
					if (values_length === 0) {
						return [ [], [] ];
					}

					/*
					 * Calculate the sum for each of the parts necessary.
					 */
					for (let i = 0; i< values_length; i++) {
						x = values_x[i];
						y = values_y[i];
						x_sum+= x;
						y_sum+= y;
						xx_sum += x*x;
						xy_sum += x*y;
						count++;
					}

					/*
					 * Calculate m and b for the line equation:
					 * y = x * m + b
					 */
					var m = (count*xy_sum - x_sum*y_sum) / (count*xx_sum - x_sum*x_sum);
					var b = (y_sum/count) - (m*x_sum)/count;


					return [m, b]
				}

				function predict(data) {

					log_infecteds = data.map(d=>Math.log(d.i));
					log_toll = data.map(d=>Math.log(d.t));
					days = [...Array(data.length).keys()];

					let [m, b] = findLineByLeastSquares(days, log_infecteds);
					let [mt, bt] = findLineByLeastSquares(days, log_toll);

					/*
					 * We then return the x and y data points according to our fit
					 */
					var result_values_x = [];
					var result_values_y = [];

					// predict next 3 values
					let previous_date = undefined;
					for (let i = log_infecteds.length; i < log_infecteds.length + 3; i++) {
						let y = i * m + b;
						let yt = i * mt + bt;
						let datum = data[i];
						if (!datum) {
							datum = {};
							data.push(datum);
						}
						datum.i = Math.exp(y);
						datum.t = Math.exp(yt);
						if (!datum.d) {
						  datum.d = moment(previous_date).add(1,'days').format('YYYY-MM-DD');
						}

						previous_date = datum.d
					}

					return data;
				}



			</script>

		</div>
	</div>

</body>
</html>